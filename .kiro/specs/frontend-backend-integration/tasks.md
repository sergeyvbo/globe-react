# План реализации интеграции фронтенда и бекенда

- [x] 1. Обновление конфигурации API








  - Обновить базовые URL для подключения к .NET API
  - Настроить переменные окружения для разработки и продакшена
  - Обновить CORS настройки в бекенде для фронтенда
  - _Требования: 1.1, 1.2_

- [x] 2. Обновление типов данных





  - [x] 2.1 Добавить типы для Game Stats API


    - Создать интерфейсы GameSessionRequest, GameSessionDto, GameStatsResponse
    - Добавить типы для истории игр и миграции прогресса
    - _Требования: 4.1, 4.2, 4.4_

  - [x] 2.2 Добавить типы для Leaderboard API


    - Создать интерфейсы LeaderboardResponse, LeaderboardEntryDto
    - Добавить типы для фильтрации лидербордов
    - _Требования: 6.1, 6.2, 6.3_

- [ ] 3. Создание новых API сервисов
  - [ ] 3.1 Создать GameStatsApiService
    - Реализовать методы для сохранения игровых сессий
    - Добавить методы для получения статистики пользователя
    - Реализовать получение истории игр с пагинацией
    - Добавить миграцию анонимного прогресса
    - _Требования: 4.1, 4.2, 4.3, 4.4_

  - [ ] 3.2 Создать LeaderboardService
    - Реализовать получение глобального лидерборда
    - Добавить фильтрацию по типу игры и периоду времени
    - Реализовать кеширование лидербордов
    - _Требования: 6.1, 6.2, 6.3, 6.4_

- [ ] 4. Обновление существующих сервисов
  - [ ] 4.1 Обновить GameProgressService
    - Интегрировать с GameStatsApiService для серверного сохранения
    - Сохранить localStorage как fallback для офлайн режима
    - Реализовать автоматическую синхронизацию при восстановлении соединения
    - Обновить методы миграции анонимного прогресса
    - _Требования: 4.1, 4.5, 8.1, 8.2, 8.3_

  - [ ] 4.2 Обновить конфигурацию AuthService
    - Изменить API_BASE_URL на правильный адрес бекенда
    - Проверить соответствие эндпоинтов с .NET API
    - _Требования: 1.1, 2.1, 2.2_

- [ ] 5. Создание React компонентов для статистики
  - [ ] 5.1 Создать компонент UserStats
    - Отобразить общую статистику пользователя
    - Добавить разбивку по типам игр
    - Реализовать индикаторы загрузки и обработку ошибок
    - _Требования: 5.1, 5.4, 7.1, 7.4_

  - [ ] 5.2 Создать компонент GameHistory
    - Отобразить историю игровых сессий с пагинацией
    - Добавить фильтрацию по типу игры
    - _Требования: 5.3, 7.1_

- [ ] 6. Создание React компонентов для лидербордов
  - [ ] 6.1 Создать компонент Leaderboard
    - Отобразить список лидеров с пагинацией
    - Выделить позицию текущего пользователя
    - Добавить фильтры по типу игры и периоду
    - Реализовать индикаторы загрузки
    - _Требования: 6.1, 6.2, 6.3, 6.4, 6.5, 7.1_

- [ ] 7. Интеграция с игровыми компонентами
  - [ ] 7.1 Обновить CountryQuiz компонент
    - Интегрировать автоматическое сохранение результатов
    - Добавить обработку офлайн режима
    - _Требования: 4.1, 4.4, 8.1, 8.2_

  - [ ] 7.2 Обновить FlagQuiz компонент
    - Интегрировать автоматическое сохранение результатов
    - Добавить обработку офлайн режима
    - _Требования: 4.1, 4.4, 8.1, 8.2_

  - [ ] 7.3 Обновить StateQuiz компонент
    - Интегрировать автоматическое сохранение результатов
    - Добавить обработку офлайн режима
    - _Требования: 4.1, 4.4, 8.1, 8.2_

- [ ] 8. Обновление навигации и маршрутизации
  - [ ] 8.1 Добавить маршруты для статистики
    - Создать страницу /stats для отображения статистики пользователя
    - Добавить защищенный маршрут для аутентифицированных пользователей
    - _Требования: 5.1, 5.2_

  - [ ] 8.2 Добавить маршруты для лидербордов
    - Создать страницу /leaderboard для отображения лидербордов
    - Сделать доступной для всех пользователей
    - _Требования: 6.1_

- [ ] 9. Обработка офлайн режима
  - [ ] 9.1 Создать OfflineDetector компонент
    - Отслеживать состояние интернет-соединения
    - Показывать индикатор офлайн режима
    - _Требования: 8.4_

  - [ ] 9.2 Реализовать офлайн синхронизацию
    - Сохранять действия пользователя в очередь при отсутствии соединения
    - Автоматически синхронизировать при восстановлении соединения
    - _Требования: 8.1, 8.2, 8.3_

- [ ] 10. Написание тестов
  - [ ] 10.1 Unit тесты для новых сервисов
    - Тесты для GameStatsApiService
    - Тесты для LeaderboardService
    - Тесты для обновленного GameProgressService
    - _Требования: все_

  - [ ] 10.2 Integration тесты для API интеграции
    - Тесты полного цикла сохранения игровых результатов
    - Тесты получения и отображения статистики
    - Тесты лидербордов с различными фильтрами
    - _Требования: все_

  - [ ] 10.3 E2E тесты пользовательских сценариев
    - Тест полного игрового цикла с сохранением результатов
    - Тест просмотра статистики и лидербордов
    - Тест офлайн/онлайн синхронизации
    - _Требования: все_

- [ ] 11. Обновление документации
  - [ ] 11.1 Обновить README проекта
    - Добавить информацию о новых API эндпоинтах
    - Обновить инструкции по настройке окружения
    - Добавить описание новых функций (статистика, лидерборды)
    - _Требования: все_

  - [ ] 11.2 Создать API документацию
    - Документировать все используемые API эндпоинты
    - Добавить примеры запросов и ответов
    - Создать схемы данных
    - _Требования: все_

- [ ] 12. Настройка окружения и деплоя
  - [ ] 12.1 Настроить переменные окружения
    - Настроить REACT_APP_API_URL для разработки (http://localhost:5000/api)
    - Настроить REACT_APP_API_URL для продакшена (http://10.66.66.64/api)
    - _Требования: 1.1_

  - [ ] 12.2 Обновить конфигурацию бекенда
    - Добавить фронтенд URL в CORS настройки
    - Проверить настройки безопасности для продакшена
    - _Требования: 1.1, 1.5_